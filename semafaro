#define S1RED 4
#define S1YELLOW 5
#define S1GREEN 6

#define S2RED 8
#define S2YELLOW 9
#define S2GREEN 10

boolean s1aberto = true;
boolean s2aberto = true;
boolean s1fechado = true;
boolean s2fechado = true;
boolean s1alerta = true;
boolean s2alerta = true;

int count = 0;


void setup()
{
  Serial.begin(9600);
  pinMode(S1RED,OUTPUT);
  pinMode(S1YELLOW,OUTPUT);
  pinMode(S1GREEN,OUTPUT);
  pinMode(S2RED,OUTPUT);
  pinMode(S2YELLOW,OUTPUT);
  pinMode(S2GREEN,OUTPUT);
  
  Serial.println("Iniciou o Semafaro");
  
  s1aberto = true;
  s2aberto = false;
  
  
}

void loop(){ 
  
  if(count <= 500){
    semafaroEstado1(true);
    
    if(count == 500){
       s1aberto = false;
        s2aberto = true;
    }
    count++;
    delay(1);
  }
  Serial.println(count);
  
  if(count >= 500){
    Serial.println("entrou");
    if(s2aberto){

      ligaLed(S1GREEN,LOW);
      ligaLed(S1YELLOW,LOW);
      ligaLed(S1RED,HIGH);

      ligaLed (S2GREEN,HIGH); 
      ligaLed(S2YELLOW,LOW);
      ligaLed(S2RED,LOW);      
    }
    if(count == 1000){
      s1aberto = true;
        s2aberto = false;
      count = 0;
    }
    delay(1);
  }
  
  
}

void ligaLed(int pinoLed, int onOff){  
  digitalWrite(pinoLed,onOff);  
}

void semafaroEstado1(boolean aberto){

  if(aberto){
      ligaLed(S1GREEN,HIGH);
      ligaLed(S1YELLOW,LOW);
      ligaLed(S1RED,LOW);

      ligaLed (S2GREEN,LOW); 
      ligaLed(S2YELLOW,LOW);
      ligaLed(S2RED,HIGH);      
    }  
 }

void semafaroEstado2(boolean aberto){

  if(aberto){
      ligaLed(S1GREEN,LOW);
      ligaLed(S1YELLOW,LOW);
      ligaLed(S1RED,HIGH);

      ligaLed (S2GREEN,HIGH); 
      ligaLed(S2YELLOW,LOW);
      ligaLed(S2RED,LOW);      
    }  
 }

 void semafaroEstado2(boolean aberto){

  if(aberto){
      ligaLed(S1GREEN,LOW);
      ligaLed(S1YELLOW,LOW);
      ligaLed(S1RED,HIGH);

      ligaLed (S2GREEN,HIGH); 
      ligaLed(S2YELLOW,LOW);
      ligaLed(S2RED,LOW);      
    }  
 }

 void semafaroEstado3(boolean aberto){

  if(aberto){
      ligaLed(S1GREEN,LOW);
      ligaLed(S1YELLOW,HIGH);
      ligaLed(S1RED,LOW);

      ligaLed (S2GREEN,LOW); 
      ligaLed(S2YELLOW,LOW);
      ligaLed(S2RED,HIGH);      
    }  
 }

 void semafaroEstado4(boolean aberto){

  if(aberto){
      ligaLed(S1GREEN,LOW);
      ligaLed(S1YELLOW,LOW);
      ligaLed(S1RED,HIGH);

      ligaLed (S2GREEN,LOW); 
      ligaLed(S2YELLOW,HIGH);
      ligaLed(S2RED,LOW);      
    }  
 }

  void semafaroEstado5(boolean aberto){

  if(aberto){
      ligaLed(S1GREEN,LOW);      
      ligaLed(S1RED,LOW);

      ligaLed (S2GREEN,LOW);      
      ligaLed(S2RED,LOW);

      ligaLed(S1YELLOW,LOW);
      ligaLed(S2YELLOW,HIGH);
      delay(100);
      ligaLed(S1YELLOW,HIGH);
      ligaLed(S2YELLOW,LOW);
      
    }  
 }
